{% extends 'base.html' %}
{% load i18n %}
{% load render_table export_url from django_tables2 %}

{% block title %}
  {% if view.title %}
    {{ view.title }}
  {% else %}
    {{ super }}
  {% endif %}
{% endblock title %}

{% block content %}

  {% if view.title %}
    <h1>{{ view.title }}</h1>
  {% endif %}

  {% if "show_only_conflicts" in context or "show_only_conflicts" in request.GET %}
    <form method="GET">
      <div class="form-group form-check">
        <input
          {% if show_only_conflicts %}checked{% endif %}
          type="checkbox"
          class="form-check-input"
          id="show-only-conflicts"
          name="show_only_conflicts">
        <label class="form-check-label" for="show-only-conflicts">{% trans 'Show Only Conflicts' %}</label>
      </div>
    </form>
      <script>
        $(document).ready(function() {
          $('#show-only-conflicts').change(function()
          {
              $(location).attr("href",
                $(location).attr("pathname") + "?show_only_conflicts=" + (this.checked ? '1':'0'));
          });
        });
      </script>
  {% endif %}

  {% render_table table %}

  {% if view.export_formats %}
    <form method="GET">
    <input type="hidden" name="show_only_conflicts" value="{% if show_only_conflicts %}1{% else %}0{% endif %}" >
      <div class="form-group row">
        <div class="col" style="max-width: 7pc;">
          <!-- label for="_export">{% trans 'Export Format' %}</label -->
          <select class="form-control"  name="_export" id="_export">
            {% for format in view.export_formats %}
              <option value="{{ format }}">{{ format }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col">
          <input class="btn btn-primary" type="submit" value="{% trans 'Export' %}" >
        </div>
      </div>
    </form>
  {% endif %}

{% endblock %}
