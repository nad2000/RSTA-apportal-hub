{% extends 'base.html' %}
{% load crispy_forms_tags static i18n crispy_forms_field django_bootstrap_breadcrumbs %}
{% block localcss %}
  {{ block.super }}
<style>
select {padding-right: 1px;}
option {direction: rtl;}
</style>
{% endblock %}

{% block breadcrumbs %}
  {{ block.super }}
  {% breadcrumb "Reviews" "reviews" %}
  {% if state == "draft" %}
    {% breadcrumb "Draft" "reviews-draft" %}
  {% elif state == "submitted" %}
    {% breadcrumb "Submitted" "reviews-submitted" %}
  {% endif %}
  {% if round %}
    {% if state %}
      {% breadcrumb round.title "round-application-list-with-state" round_id=round.pk state=state %}
    {% else %}
      {% breadcrumb round.title "round-application-list" round_id=round.pk %}
    {% endif %}
  {% endif %}
  {% if application %}
    {% if state %}
      {% breadcrumb application "round-application-reviews-list" round_id=round.pk application_id=application.pk %}
    {% else %}
      {% breadcrumb application "round-application-reviews-list-with-state" round_id=round.pk state=state application_id=application.pk %}
    {% endif %}
  {% endif %}
{% endblock %}

{% block sidebar %}{% include 'sidebar.html' with category="reviews" %}{% endblock sidebar %}

{% block title %}{{ application }}{% endblock %}

{% block content %}

<form method="post">

  {% csrf_token %}
  {{ form.comment | as_crispy_field }}

  {% for formset in inlines %}
    {{ formset.management_form }}
    <table class="table" style="width: 100%;">
      <thead>
        <tr>
          <th>{% trans 'Criterion' %}</th>
          <th>{% trans 'Score' %}<span class="asteriskField">*</span></th>
          <th>{% trans 'Comment' %}</th>
        </tr>
      </thead>
      <tbody>

        {% for form in formset %}
          {% crispy_field form.id %}
          <tr>
            <td class="form-group" style="width: 30%; max-width: 20pc;">
              {% crispy_field form.criterion %}
            </td>
            <td class="form-group" style="width: 6pc;">
              {% crispy_field form.value %}
            </td>
            <td class="form-group" style="max-width: 60%;">
              {% crispy_field form.comment %}
              {% if form.comment_required %}<span class="asteriskField">* {% trans 'Commenting is mandatory' %}</span>{% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endfor %}

  <div class="buttonHolder mb-3 float-right">
    <input type="submit" name="save_draft"
      value="{% trans 'Save Draft' %}" class="btn btn btn-primary" id="submit-id-save_draft">
    <input type="submit" name="submit" value="{% trans 'Submit' %}"
      class="btn btn btn-outline-primary" id="submit-id-submit">
    <a href="/applications/23" type="button" role="button" class="btn btn-secondary" id="cancel">
      {% trans 'Cancel' %}
    </a>
  </div>

</form>

{% endblock %}
